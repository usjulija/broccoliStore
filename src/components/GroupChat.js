import React from 'react';

class GroupChat extends React.Component {
  state = {
    currentMessage: ""
  }

  renderMessages = (data, index) => {
    if(data.senderId === "client") {
      return (
        <li className="user" key={index}>
          <div className="message">
            <p>{data.senderId}</p>
            <p>{data.text}</p>
          </div>
          <div className="image">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -20 395.9 395">
              <path fill="#fff35f" d="M240.2 349.6h-84.4A87.5 87.5 0 0 1 68.3 262v-55.9h259.4v55.9a87.5 87.5 0 0 1-87.5 87.5"/>
              <path fill="#54596e" d="M240.2 349.6v-6.8h-84.4A80.4 80.4 0 0 1 75 262v-49h245.7v49a80.4 80.4 0 0 1-80.6 80.7v13.6a94.4 94.4 0 0 0 94.3-94.3v-55.9a6.9 6.9 0 0 0-6.8-6.8H68.3a6.8 6.8 0 0 0-6.8 6.8v55.9a94.4 94.4 0 0 0 94.3 94.3h84.4z"/>
              <path fill="#eee361" d="M320.9 213H75v34.2h245.8z"/>
              <path fill="#54596e" d="M327.7 206.2H68.3v41H75V213h245.8v34.2h6.8zM171.3 285c5.1 9.8 15 16.8 26.6 16.8 11.5 0 21.3-6.9 26.5-16.5a6.8 6.8 0 1 0-12-6.6c-3.2 6-8.6 9.4-14.5 9.4s-11.3-3.5-14.6-9.5a6.8 6.8 0 1 0-12 6.4zm0 0"/>
              <path fill="#ffd578" d="M389.1 197.7A191.6 191.6 0 0 0 217.4 8.2 191.2 191.2 0 0 0 6.8 198.6v.3a26.6 26.6 0 0 0 29.9 25.8l76-8.8a735.3 735.3 0 0 1 170.5 0l76 8.8c16 1.9 30-10.7 30-26.9zm0 0"/>
              <g fill="#54596e">
                <path d="M389.1 197.7h6.8A198.4 198.4 0 0 0 198 .5 198 198 0 0 0 0 198.5v.3c0 9.2 4 17.6 10 23.4a33.9 33.9 0 0 0 27.4 9.2l76.1-8.9a727.3 727.3 0 0 1 169 0l76 9 3.9.1c18.4 0 33.5-15 33.5-33.9h-13.6a20.1 20.1 0 0 1-22.3 20.1l-76-8.8a741.5 741.5 0 0 0-172 0l-76.1 8.9h-2.4c-5.3 0-10.3-2-14-5.5a18.8 18.8 0 0 1-5.8-13.7v-.2c0-51 20.6-97 54-130.4a183.7 183.7 0 0 1 149-53 184.8 184.8 0 0 1 165.6 182.7zm0 0M150.2 254a13.7 13.7 0 1 1-27.3 0 13.7 13.7 0 0 1 27.3 0zm0 0M273 254a13.7 13.7 0 1 1-27.2 0 13.7 13.7 0 0 1 27.3 0zm0 0"/>
              </g>
              <path fill="#ffd578" d="M129.7 291.6a10.2 10.2 0 1 1-20.5 0 10.2 10.2 0 0 1 20.5 0zm0 0M286.7 291.6a10.2 10.2 0 1 1-20.5 0 10.2 10.2 0 0 1 20.5 0zm0 0"/>
              <path fill="#ffb8f2" d="M33.3 101.3a37.6 37.6 0 0 0 50-55.9 192.2 192.2 0 0 0-50 56zm0 0"/>
              <path fill="#54596e" d="M33.3 101.3l-4.5 5.2A44.2 44.2 0 0 0 102.4 73c0-13-5.6-24.6-14.4-32.7a6.8 6.8 0 0 0-8.7-.4A199 199 0 0 0 27.5 98a6.8 6.8 0 0 0 1.3 8.6l4.5-5.2 6 3.5C51.5 83.8 68 65.5 87.4 51l-4.1-5.4-4.6 5a30.6 30.6 0 0 1 1 44.3 30.6 30.6 0 0 1-42 1.4l-4.5 5.1 6 3.5zm0 0"/>
              <path fill="#ffb8f2" d="M177.5 144.8a34.1 34.1 0 1 1-68.3 0 34.1 34.1 0 0 1 68.3 0zm0 0"/>
              <path fill="#54596e" d="M177.5 144.8h6.8a41 41 0 1 0-81.9 0 41 41 0 0 0 82 0h-13.7a27.2 27.2 0 0 1-27.3 27.3 27.2 27.2 0 0 1-27.3-27.3 27.2 27.2 0 0 1 27.3-27.3 27.2 27.2 0 0 1 27.3 27.3zm0 0"/>
              <path fill="#ffb8f2" d="M265.4 19.5a40.8 40.8 0 0 0 28.1 70.7 41 41 0 0 0 38.7-27.6 192 192 0 0 0-66.8-43zm0 0"/>
              <path fill="#54596e" d="M265.4 19.5l-4.8-4.9a47.7 47.7 0 1 0 78 50.2c1-2.5.3-5.2-1.6-7a198.8 198.8 0 0 0-69.2-44.6c-2.5-1-5.3-.4-7.2 1.4l4.8 5-2.5 6.3a185.2 185.2 0 0 1 64.5 41.5l4.8-4.8-6.4-2.2a34.1 34.1 0 1 1-55.7-36l-4.7-4.9-2.5 6.4zm0 0"/>
              <path fill="#ffb8f2" d="M327.7 158.4a20.5 20.5 0 1 1-41 0 20.5 20.5 0 0 1 41 0zm0 0"/>
              <path fill="#54596e" d="M327.7 158.4h6.8a27.3 27.3 0 1 0-54.6 0 27.3 27.3 0 0 0 54.6 0H321a13.7 13.7 0 1 1-27.4 0 13.7 13.7 0 0 1 27.4 0zm0 0"/>
            </svg>
          </div>
        </li>
      );
    } else if (data.senderId === "admin") {
      return (
        <li className="admin" key={index}>
          <div className="image">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="-28 0 411 411">
              <path fill="#61c5a8" d="M96 389s27-68 20-109-41-109-41-109l41-7 34 75 21-21v-68h27v75l75-61 14 48s-41 27-48 61 7 116 7 116c-14 34-150 0-150 0zm0 0"/>
              <path fill="#54596e" d="M96 389l6 3 11-33c5-19 11-43 11-65l-1-15c-4-22-14-49-24-72-9-22-18-39-18-39l-6 3 1 6 36-6 32 71a7 7 0 0 0 11 2l21-21 2-5v-61h13v68a7 7 0 0 0 11 6l67-55 11 38 7-2-4-6s-11 7-22 19a98 98 0 0 0-29 47l-2 26c0 40 9 92 9 92l7-1-7-2-3 4c-3 2-8 4-14 5l-21 1a406 406 0 0 1-101-14l-3-1-1 7 6 3-6-3-2 7a638 638 0 0 0 107 15c11 0 22-1 31-3l12-6c4-3 6-6 8-10l1-4-1-2a658 658 0 0 1-6-112c3-14 14-29 24-40a160 160 0 0 1 19-16h1v-1h1c2-1 3-4 2-7l-13-48a7 7 0 0 0-11-3l-64 52v-61a7 7 0 0 0-7-7h-27a7 7 0 0 0-7 7v66l-12 11-30-66c-1-3-4-4-7-4l-41 7a7 7 0 0 0-5 10l1 3c4 6 12 24 20 44a315 315 0 0 1 20 73 234 234 0 0 1-17 84l-3 6v2l-1 1a7 7 0 0 0 5 9zm0 0"/>
              <path fill="#54596e" d="M148 307c-3 0-5 8-4 14 7 30 19 50 34 50 14 0 27-20 33-49 2-7 0-14-3-14l-11 2c-13 3-26 3-38 0zm0 0"/>
              <path fill="#9af43b" d="M341 212a48 48 0 1 1-95 0 48 48 0 0 1 95 0zm0 0"/>
              <path fill="#54596e" d="M341 212h7a55 55 0 1 0-109 0 55 55 0 0 0 109 0h-13a41 41 0 0 1-41 41 41 41 0 0 1-29-70 41 41 0 0 1 70 29zm0 0"/>
              <path fill="#9af43b" d="M201 7c-34 0-63 16-70 38a61 61 0 1 0 26 50v-3c12 6 28 10 44 10 40 0 72-21 72-47S241 7 201 7zm0 0"/>
              <path fill="#54596e" d="M201 7V0c-18 0-35 4-49 12-13 7-24 18-27 32l6 1 4-5c-11-8-25-13-39-13a68 68 0 1 0 68 69v-4h-7l-3 6c13 7 30 11 47 11 21 0 41-5 55-15 7-5 13-10 17-17s7-14 7-22-3-16-7-23c-6-10-16-18-29-23-12-6-27-9-43-9v14c19 0 36 5 47 13 6 3 11 8 14 13 3 4 4 9 4 15 0 5-1 10-4 15-5 7-13 13-23 18-11 5-24 8-38 8-15 0-30-4-41-10a7 7 0 0 0-10 6v4a54 54 0 0 1-54 54 54 54 0 0 1-39-93 54 54 0 0 1 70-6 7 7 0 0 0 11-4c2-8 10-17 21-23s26-10 42-10V7zm0 0"/>
              <path fill="#9af43b" d="M164 61c-49 0-88 28-88 62s39 61 88 61c27 0 52-9 68-22 12 5 26 9 41 9 42 0 75-25 75-55s-33-55-75-55c-20 0-38 6-52 16"/>
              <path fill="#54596e" d="M164 55c-26 0-49 7-66 19-9 6-16 13-21 21-5 9-8 18-8 28s3 19 8 27c8 13 20 23 35 30s33 11 52 11c29 0 55-9 72-24l-4-5-3 6c13 6 28 9 44 9 22 0 42-6 57-17 8-5 14-12 18-19a49 49 0 0 0 0-50c-6-11-17-20-30-26-13-7-28-10-45-10-21 0-41 6-55 16a7 7 0 1 0 7 11c12-8 29-14 48-14 20 0 37 6 49 15 6 4 11 10 14 15a35 35 0 0 1 0 36c-4 8-13 16-24 21-11 6-24 9-39 9-14 0-27-3-38-8-3-2-5-1-8 0a99 99 0 0 1-63 21c-23 1-44-6-58-16-8-5-13-11-17-18-4-6-6-13-6-20s2-14 6-21c6-9 16-18 29-24s29-10 46-10a7 7 0 0 0 0-13zm0 0"/>
              <path fill="#9af43b" d="M86 143a55 55 0 1 0 23 22"/>
              <path fill="#54596e" d="M89 136c-8-4-17-6-28-6a61 61 0 1 0 54 32 7 7 0 0 0-12 6 48 48 0 0 1-8 57 48 48 0 0 1-67 0 48 48 0 0 1 0-68 48 48 0 0 1 55-8 7 7 0 0 0 6-13zm0 0"/>
              <g fill="#61c5a8">
                <path d="M314 331a10 10 0 1 1-20 0 10 10 0 0 1 20 0zm0 0M41 372a10 10 0 1 1-20 0 10 10 0 0 1 20 0zm0 0M287 379a10 10 0 1 1-21 0 10 10 0 0 1 21 0zm0 0M355 372a10 10 0 1 1-20 0 10 10 0 0 1 20 0zm0 0M294 119a10 10 0 1 1-21 0 10 10 0 0 1 21 0zm0 0M335 300a7 7 0 1 1-14 0 7 7 0 0 1 14 0zm0 0M82 75a7 7 0 1 1-14 0 7 7 0 0 1 14 0zm0 0M219 34a7 7 0 1 1-14 0 7 7 0 0 1 14 0zm0 0M321 218a7 7 0 1 1-14 0 7 7 0 0 1 14 0zm0 0M14 314a7 7 0 1 1-14 0 7 7 0 0 1 14 0zm0 0M48 164a7 7 0 1 1-14 0 7 7 0 0 1 14 0zm0 0M150 137a7 7 0 1 1-13 0 7 7 0 0 1 13 0zm0 0M82 396a7 7 0 1 1-14 0 7 7 0 0 1 14 0zm0 0M171 96a7 7 0 1 1-14 0 7 7 0 0 1 14 0zm0 0M48 341a7 7 0 1 1-14 0 7 7 0 0 1 14 0zm0 0M48 218a7 7 0 1 1-14 0 7 7 0 0 1 14 0zm0 0"/>
              </g>
              <path fill="#54596e" d="M164 270a10 10 0 1 1-21 0 10 10 0 0 1 21 0zm0 0M212 270a10 10 0 1 1-21 0 10 10 0 0 1 21 0zm0 0"/>
            </svg>
          </div>
          <div className="message">
            <p>{data.senderId}</p>
            <p>{data.text}</p>
          </div>
        </li>
      );
    } 
  }

  handleChange = (e) => {
    console.log(e.target.value);
    this.setState({currentMessage: e.target.value});
  }

  handleSubmit = (e) => {
    e.preventDefault();
    this.props.sendMessage(this.state.currentMessage, this.props.user);
    e.target.reset();
  }

  render() {
    const toggleTabindex =
      this.props.modalVisible ||
      this.props.popUpVisible ||
      this.props.checkoutVisible
        ? "-1"
        : "0";
    return (
      <section className="chat">
        <h1>Broccoli Store live chat</h1>
        <h4>Ready to help you!</h4>
        <div className="chatWindow">
          <ul className="chatList">
            {this.props.messages.map(this.renderMessages)}
          </ul>
            <form onSubmit={this.handleSubmit}>
              <input
                className="textarea input"
                type="text"
                placeholder="Enter your message..."
                onChange={this.handleChange}
                tabIndex={toggleTabindex}
              />
              <button aria-label="send message" title="send" tabIndex={toggleTabindex}>
                <svg fill="#6c3a32" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                  <path d="M481.5 210.3L68.5 39C51 31.7 31.3 35 17 47.2A49.2 49.2 0 0 0 1.6 96.8L42.2 256 1.6 415.2A49.2 49.2 0 0 0 17 464.8a49.2 49.2 0 0 0 51.3 8.3l413.1-171.4A48.7 48.7 0 0 0 512 256a48.7 48.7 0 0 0-30.5-45.7zM470 274L57 445.4a19 19 0 0 1-20.3-3.3 19 19 0 0 1-6-19.5L69.2 271h149a15 15 0 1 0 0-30h-149L30.6 89.4a19 19 0 0 1 6.1-19.5A19 19 0 0 1 57 66.6L470 238c11.1 4.7 12 15 12 18s-.9 13.3-12 18z"/>
                </svg>
              </button>
            </form>
        </div>
      </section>
    )
  }
}

export default GroupChat;